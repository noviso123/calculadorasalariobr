import{jsxs as B,jsx as p}from"react/jsx-runtime";import{memo as nt}from"react";const Z=[{limit:1621,rate:.075},{limit:3080.28,rate:.09},{limit:4620.43,rate:.12},{limit:8475.55,rate:.14}],j=189.59,wt=1980.38,kt=67.54,et=[{limit:2259.2,rate:0,deduction:0},{limit:2826.65,rate:.075,deduction:169.44},{limit:3751.05,rate:.15,deduction:381.44},{limit:4664.68,rate:.225,deduction:662.77},{limit:1/0,rate:.275,deduction:896}],Nt=564.8,m=t=>Math.round((t+1e-9)*100)/100,at=(t,e)=>{if(e<=5e3)return 0;if(e<=7350){const i=(e-5e3)*.3581;return m(Math.max(0,i))}let a=0;for(const n of et){if(t<=n.limit){a=t*n.rate-n.deduction;break}n.limit===1/0&&(a=t*n.rate-n.deduction)}a=Math.max(0,a);const o=Math.max(0,e-Nt);let s=0;for(const n of et){if(o<=n.limit){s=o*n.rate-n.deduction;break}n.limit===1/0&&(s=o*n.rate-n.deduction)}return s=Math.max(0,s),m(Math.min(a,s))},L=t=>{let e=0,a=0;const o=Z[Z.length-1].limit;if(t>o){let s=0,n=0;for(const i of Z)s+=(i.limit-n)*i.rate,n=i.limit;e=s}else for(const s of Z){if(t<=a)break;const n=s.limit,i=Math.min(t,n)-a;i>0&&(e+=i*s.rate),a=n}return m(e)},ot=(t,e)=>{if(!t)return{value50:0,value100:0,valueNight:0,valueStandby:0,valueInterjornada:0,valueDsr:0,total:0};const a=e.workload>0?e.workload:220,o=t/a,s=o*1.5*e.hours50,n=o*2*e.hours100,i=o*.2*e.hoursNight,c=o*(1/3)*e.hoursStandby,d=o*1.5*(e.hoursInterjornada||0),r=s+n+i+c+d;let l=0;e.includeDsr&&(l=r*.2);const g=r+l;return{value50:s,value100:n,valueNight:i,valueStandby:c,valueInterjornada:d,valueDsr:l,total:g}},ht=(t,e,a)=>{const o=m(t*.35),s=m(t*.05);if(!a||!e)return{totalMargin:o,availableMargin:o,cardMargin:s,discount:0};const n=e.monthlyInstallment||0,i=Math.min(n,o),c=Math.max(0,m(o-i));return{totalMargin:o,availableMargin:c,cardMargin:s,discount:m(i)}},Bt=t=>{const{grossSalary:e,otherDiscounts:a,healthInsurance:o=0,includeTransportVoucher:s,transportVoucherPercent:n,transportDailyCost:i=0,workDays:c=22,includeExtras:d,extras:r,includeConsigned:l,consigned:g,includeDependents:b,dependents:x}=t;let u={value50:0,value100:0,valueNight:0,valueStandby:0,valueInterjornada:0,valueDsr:0,total:0};d&&r&&(u=ot(e,r));const f=e+u.total,v=L(f),N=m(f*.08),M=b?x*j:0,w=Math.max(0,f-v-M),h=at(w,f);let F=0;if(s){const U=e*(n/100);if(i>0&&c>0){const ct=i*c;F=Math.min(U,ct)}else F=U}const P=m(v+h+a+F+o);let S=0;b&&x>0&&f<=wt&&(S=m(x*kt));const st=f-P+S,E=Math.max(0,Number(st.toFixed(2))),G=Math.max(0,f-v-h),{totalMargin:it,availableMargin:rt,cardMargin:R,discount:T}=ht(G,g,l),W=E-T,lt=Math.max(0,m(W));return{grossSalary:e,totalExtras:u.total,extrasBreakdown:u,inss:v,irpf:Math.max(0,Number(h.toFixed(2))),dependentsDeduction:M,transportVoucher:Number(F.toFixed(2)),healthInsurance:o,otherDiscounts:a,netSalary:E,totalDiscounts:Number(P.toFixed(2)),effectiveRate:f>0?Number((P/f*100).toFixed(2)):0,fgtsMonthly:N,totalConsignableMargin:it,availableConsignableMargin:rt,cardMargin:R,consignedDiscount:T,familySalary:S,finalNetSalary:lt}},Et=t=>{let e={value50:0,value100:0,valueNight:0,valueStandby:0,valueInterjornada:0,valueDsr:0,total:0};t.includeExtras&&t.extras&&(e=ot(t.grossSalary,t.extras));const o=(t.grossSalary+e.total)/12*t.monthsWorked,s=Number((o/2).toFixed(2)),n=L(o),i=t.includeDependents?t.dependents*j:0,c=Math.max(0,o-n-i),d=at(c,o),r=o-n-d-s,l=Math.max(0,Number(r.toFixed(2))),{totalMargin:g,availableMargin:b,cardMargin:x,discount:u}=ht(l+s,t.consigned,t.includeConsigned),f=Math.max(0,Number((l-u).toFixed(2)));return{totalGross:Number(o.toFixed(2)),totalExtrasAverage:Number(e.total.toFixed(2)),extrasBreakdown:e,totalNet:Number((s+l).toFixed(2)),parcel1:{value:s},parcel2:{grossReference:Number(o.toFixed(2)),inss:n,irpf:Math.max(0,Number(d.toFixed(2))),discountAdvance:s,value:l,totalConsignableMargin:g,availableConsignableMargin:b,cardMargin:x,consignedDiscount:u,finalValue:f},finalTotalNet:Math.max(0,Number((s+l-u).toFixed(2)))}},It=(t,e)=>{const a=new Date(t);return a.setDate(a.getDate()+e),a},pt=t=>new Date(t.getFullYear(),t.getMonth(),t.getDate(),12,0,0),tt=(t,e)=>{let a=0;const o=pt(t),s=pt(e);if(o>s)return 0;const n=new Date(o.getFullYear(),o.getMonth(),1,12,0,0),i=new Date(s.getFullYear(),s.getMonth(),s.getDate(),12,0,0);for(;n<=i;){const c=n.getFullYear(),d=n.getMonth(),r=new Date(c,d,1,12,0,0),l=new Date(c,d+1,0,12,0,0),g=o>r?o:r,b=s<l?s:l;if(g<=b){const x=b.getTime()-g.getTime();Math.floor(x/(1e3*60*60*24))+1>=15&&a++}n.setMonth(n.getMonth()+1)}return a},I=t=>t.toLocaleDateString("pt-BR"),Rt=t=>{const e=new Date(t.startDate+"T12:00:00"),a=new Date(t.endDate+"T12:00:00");if(e>a)return{balanceSalary:0,noticeWarning:0,noticeDeduction:0,vacationProportional:0,vacationMonths:0,vacationPeriodLabel:"Datas Invertidas",vacationExpired:0,vacationThird:0,thirteenthProportional:0,thirteenthMonths:0,thirteenthPeriodLabel:"Datas Invertidas",thirteenthAdvanceDeduction:0,fgtsFine:0,estimatedFgtsBalance:0,totalFgts:0,totalGross:0,totalExtrasAverage:0,extrasBreakdown:{value50:0,value100:0,valueInterjornada:0,valueNight:0,valueStandby:0,valueDsr:0,total:0},discountInss:0,discountIr:0,irBreakdown:{salary:0,thirteenth:0,vacation:0,total:0},totalDiscounts:0,totalNet:0,totalConsignableMargin:0,availableConsignableMargin:0,cardMargin:0,consignedDiscount:0,remainingLoanBalance:0,warrantyUsed:0,fineUsed:0,totalFgtsDeduction:0,finalFgtsToWithdraw:0,finalNetTermination:0};const o=Math.abs(a.getTime()-e.getTime()),s=Math.ceil(o/(1e3*60*60*24)),n=Math.floor(s/365),i=new Date(a.getFullYear(),a.getMonth(),1,12,0,0),c=Math.floor((a.getTime()-i.getTime())/(1e3*3600*24))+1,d=Math.min(c,30);let r={value50:0,value100:0,valueNight:0,valueStandby:0,valueInterjornada:0,valueDsr:0,total:0};t.includeExtras&&t.extras&&(r=ot(t.grossSalary,t.extras));const l=t.grossSalary+r.total,g=t.grossSalary/30*d;let b=0,x=0,u=new Date(a);const f=Math.min(30+n*3,90);t.reason==="dismissal_no_cause"?t.noticeStatus==="indemnified"&&(b=l/30*f,u=It(a,f)):t.reason==="resignation"&&t.noticeStatus==="not_fulfilled"&&(x=t.grossSalary);let v=0,N=0,M="",w=0;if(t.reason!=="dismissal_cause"){const Y=a.getFullYear(),q=u.getFullYear(),Q=new Date(Y,0,1,12,0,0),C=e>Q?e:Q;if(t.reason==="dismissal_no_cause"&&t.noticeStatus==="indemnified"&&q>Y){const D=new Date(Y,11,31,12,0,0),k=tt(C,D),X=l/12*k,V=new Date(q,0,1,12,0,0),vt=tt(V,u),Dt=l/12*vt;N=k+vt,v=X+Dt,M=`${I(C)} a ${I(D)} + ${I(V)} a ${I(u)}`,t.thirteenthAdvancePaid&&(w=X/2)}else{const D=t.reason==="dismissal_no_cause"&&t.noticeStatus==="indemnified"?u:a;N=tt(C,D),v=l/12*N,M=`${I(C)} a ${I(D)}`,t.thirteenthAdvancePaid&&(w=v/2)}}let h=new Date(e);h.setHours(12,0,0,0),h.setFullYear(u.getFullYear()),h>u&&h.setFullYear(u.getFullYear()-1),h<e&&(h=new Date(e));const F=tt(h,u),P=`${I(h)} a ${I(u)}`,S=l/12*F,st=t.hasExpiredVacation?t.expiredVacationCount||1:0,E=l*st,G=(S+E)/3,it=S+E+G,rt=Math.floor(s/30),R=Number((l*.08*rt).toFixed(2));let T=0;t.reason==="dismissal_no_cause"&&(T=R*.4);const W=Number((R+T).toFixed(2)),lt=g+r.total,U=L(lt),ct=L(v),ut=U+ct,O=g+r.total+b+it+v,Mt=t.includeDependents?t.dependents*j:0,Ft=Math.max(0,O-ut-Mt),dt=at(Ft,O),xt=ut+dt+x+w,yt=O-xt,_=Math.max(0,Number(yt.toFixed(2)));let H=0,A=0,y=0,K=0,z=0,mt=0,gt=0,bt=0,J=W,ft=_;if(t.includeConsigned&&t.consigned&&t.consigned.outstandingBalance>0){H=Number((_*.35).toFixed(2));const Y=Math.min(t.consigned.outstandingBalance,H,_);A=Number(Y.toFixed(2)),gt=Math.max(0,m(H-A)),bt=m(_*.05),y=Number((t.consigned.outstandingBalance-A).toFixed(2));const q=_-A;if(ft=Math.max(0,Number(q.toFixed(2))),y>0&&t.consigned.hasFgtsWarranty){const Q=t.consigned.fgtsBalance&&t.consigned.fgtsBalance>0?t.consigned.fgtsBalance:R,C=Number((Q*.1).toFixed(2));let D=0,k=0;switch(t.reason){case"dismissal_no_cause":D=C,k=T;break;case"resignation":case"agreement":D=C,k=0;break;case"dismissal_cause":D=0,k=0;break}if(y>0&&D>0){const V=Math.min(y,D);K=Number(V.toFixed(2)),y=Number((y-K).toFixed(2))}if(y>0&&k>0){const V=Math.min(y,k);z=Number(V.toFixed(2)),y=Number((y-z).toFixed(2))}mt=Number((K+z).toFixed(2));const X=Math.min(mt,J);J=Number((J-X).toFixed(2))}}return{balanceSalary:Number(g.toFixed(2)),noticeWarning:Number(b.toFixed(2)),noticeDeduction:Number(x.toFixed(2)),vacationProportional:Number(S.toFixed(2)),vacationMonths:F,vacationPeriodLabel:P,vacationExpired:Number(E.toFixed(2)),vacationThird:Number(G.toFixed(2)),thirteenthProportional:Number(v.toFixed(2)),thirteenthMonths:N,thirteenthPeriodLabel:M,thirteenthAdvanceDeduction:Number(w.toFixed(2)),fgtsFine:Number(T.toFixed(2)),estimatedFgtsBalance:Number(R.toFixed(2)),totalFgts:Number(W.toFixed(2)),totalGross:Number(O.toFixed(2)),totalExtrasAverage:Number(r.total.toFixed(2)),extrasBreakdown:r,discountInss:Number(ut.toFixed(2)),discountIr:Number(dt.toFixed(2)),irBreakdown:{salary:0,thirteenth:0,vacation:0,total:Number(dt.toFixed(2))},totalDiscounts:Number(xt.toFixed(2)),totalNet:Number(_.toFixed(2)),totalConsignableMargin:H,availableConsignableMargin:gt,cardMargin:bt,consignedDiscount:A,remainingLoanBalance:y,warrantyUsed:K,fineUsed:z,totalFgtsDeduction:mt,finalFgtsToWithdraw:J,finalNetTermination:ft}},_t=t=>{let e={value50:0,value100:0,valueNight:0,valueStandby:0,valueInterjornada:0,valueDsr:0,total:0};t.includeExtras&&t.extras&&(e=ot(t.grossSalary,t.extras));const a=t.grossSalary+e.total,o=a/30*t.daysTaken,s=o/3;let n=0,i=0;t.sellDays&&t.daysSold>0&&(n=a/30*t.daysSold,i=n/3);let c=0;t.advanceThirteenth&&(c=a/2);const d=o+s+n+i+c,r=o+s,l=L(r),g=t.includeDependents?t.dependents*j:0,b=Math.max(0,r-l-g),x=at(b,d),u=l+x,f=d-u,v=Math.max(0,Number(f.toFixed(2))),{totalMargin:N,availableMargin:M,cardMargin:w,discount:h}=ht(v,t.consigned,t.includeConsigned),F=Math.max(0,Number((v-h).toFixed(2)));return{baseSalary:a,vacationGross:Number(o.toFixed(2)),vacationThird:Number(s.toFixed(2)),allowanceGross:Number(n.toFixed(2)),allowanceThird:Number(i.toFixed(2)),advanceThirteenth:Number(c.toFixed(2)),totalGross:Number(d.toFixed(2)),extrasBreakdown:e,discountInss:Number(l.toFixed(2)),discountIr:Number(x.toFixed(2)),totalDiscounts:Number(u.toFixed(2)),totalNet:Number(v.toFixed(2)),totalConsignableMargin:N,availableConsignableMargin:M,cardMargin:w,consignedDiscount:h,finalNetVacation:F}},Vt=t=>{const{grossIncome:e,dependents:a,alimony:o,otherDeductions:s,officialPension:n}=t;let i=n;i<=0&&(i=L(e));const c=a*j,d=Math.max(0,e-i-c-o-s),r=Nt,l=i+c+o+s,g=r>l,b=g?Math.max(0,e-r):d;let x=0;const u=[],v=et[0].limit||0;u.push({limit:v,rate:0,tax:0});let N=0,M=0;for(const h of et){if(b<=h.limit){N=b*h.rate-h.deduction,M=h.deduction;break}if(h.limit===1/0){N=b*h.rate-h.deduction,M=h.deduction;break}}if(x=N,e>5e3&&e<=7350){const F=(e-5e3)*.3581;F<x&&(x=F)}x=Math.max(0,x);const w=e>0?x/e*100:0;return{baseSalary:e,inssDeduction:i,dependentsDeduction:c,standardDeduction:r,legalBase:d,simplifiedBase:Math.max(0,e-r),appliedBase:b,isSimplifiedBest:g,deductibleAmount:M,taxValue:Number(x.toFixed(2)),effectiveRate:Number(w.toFixed(2)),brackets:u}},Lt=t=>{const{grossMonthly:e,regime:a,accountantCost:o,otherMonthlyExpenses:s,vacationDaysTarget:n}=t;let i=0,c="";const d=e*12;switch(a){case"mei":i=0,c="MEI (Microempreendedor Individual)";break;case"simples_nacional_3":d<=18e4?i=6:d<=36e4?i=8.2:d<=72e4?i=10.5:i=12.5,c="Simples Nacional (Anexo III)";break;case"simples_nacional_5":d<=18e4?i=15.5:d<=36e4?i=18:i=19.5,c="Simples Nacional (Anexo V)";break;case"lucro_presumido":i=14.33,c="Lucro Presumido";break}let r=0;a==="mei"?(r=85,i=r/(e||1)*100):r=e*(i/100);const l=o+s,g=Math.max(0,e-r-l),b=Math.max(0,(360-(n||0))/30),x=e*b,u=r*b,f=l*12,v=Math.max(0,x-u-f),N=v/12;return{netMonthly:m(g),taxValue:m(r),taxRate:m(i),regimeLabel:c,totalMonthlyExpenses:l,annualNet:m(v),annualTax:m(u),annualExpenses:m(f),monthlyAverageReal:m(N)}},Pt=(t,e="lucro_real_presumido")=>{const o=t*(e==="simples"?0:.2),s=t*.08,i=t*(e==="simples"?0:.02),d=t*(e==="simples"?0:.058),r=t*(1/12),l=t*(1.333333/12),g=t+o+s+i+d+r+l;return{grossSalary:t,inssPatronal:m(o),fgts:m(s),rat:m(i),terceiros:m(d),provision13th:m(r),provisionVacation:m(l),totalCostMonthly:m(g),totalCostAnnual:m(g*12)}},$=nt(({label:t,value:e,onChange:a,placeholder:o,required:s,isSmall:n})=>B("div",{className:"w-full",children:[p("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.1em] mb-2 ml-1",children:t}),B("div",{className:"relative group",children:[!n&&p("span",{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-300 font-black pointer-events-none group-focus-within:text-blue-500 transition-colors",children:"R$"}),p("input",{type:"number",inputMode:"decimal",value:e||"",onChange:i=>a(i.target.value),placeholder:o||"0,00",className:`w-full ${n?"px-4 py-3 text-sm":"pl-12 pr-6 py-4.5 text-xl"} rounded-3xl glass-input outline-none text-slate-800 font-black placeholder:text-slate-200`,required:s})]})]})),At=nt(({isActive:t,onToggle:e,data:a,onChange:o,labelOverride:s})=>B("div",{className:`rounded-3xl border-2 transition-all duration-300 ${t?"bg-orange-50/50 border-orange-100":"bg-slate-50/50 border-slate-100"}`,children:[B("label",{className:"flex items-center gap-4 p-5 cursor-pointer select-none",children:[p("div",{className:`h-6 w-6 rounded-lg border-2 flex items-center justify-center transition-all ${t?"bg-orange-600 border-orange-600 text-white":"bg-white border-slate-200"}`,children:t&&p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:p("polyline",{points:"20 6 9 17 4 12"})})}),p("input",{type:"checkbox",className:"hidden",checked:t,onChange:n=>e(n.target.checked)}),p("span",{className:"text-sm font-bold text-slate-700",children:s||"Incluir Adicionais e Horas Extras"})]}),t&&B("div",{className:"p-6 pt-0 grid grid-cols-1 sm:grid-cols-2 gap-4 animate-scale-in border-t border-orange-100/30 mt-2",children:[p("div",{className:"col-span-1 sm:col-span-2 mt-4",children:p($,{label:"Carga Mensal",value:a.workload,onChange:n=>o({...a,workload:Number(n)}),isSmall:!0})}),p($,{label:"H. Extra 50%",value:a.hours50,onChange:n=>o({...a,hours50:Number(n)}),isSmall:!0}),p($,{label:"H. Extra 100%",value:a.hours100,onChange:n=>o({...a,hours100:Number(n)}),isSmall:!0}),p($,{label:"Adic. Noturno",value:a.hoursNight,onChange:n=>o({...a,hoursNight:Number(n)}),isSmall:!0}),p($,{label:"Sobreaviso",value:a.hoursStandby,onChange:n=>o({...a,hoursStandby:Number(n)}),isSmall:!0})]})]})),Yt=nt(({label:t,value:e,isMain:a,isDanger:o,isConsigned:s})=>{let n="bg-white/70 border-white/50 premium-shadow",i="text-slate-400",c="text-slate-900";return a?(n="bg-gradient-to-br from-blue-600 to-indigo-700 text-white border-transparent shadow-xl shadow-blue-500/20",i="text-blue-100/70",c="text-white drop-shadow-md"):o?(n="bg-white/70 border-red-100/50 shadow-red-900/5",i="text-red-400",c="text-red-600"):s&&(n="bg-gradient-to-br from-indigo-500 to-purple-600 text-white border-transparent shadow-lg shadow-indigo-500/20",i="text-indigo-100/70",c="text-white"),B("div",{className:`p-8 rounded-[2rem] border backdrop-blur-xl flex flex-col justify-between transition-all hover:-translate-y-1 hover:shadow-2xl duration-500 animate-scale-in ${n} will-change-transform`,children:[p("span",{className:`text-[10px] font-black uppercase tracking-[0.2em] mb-4 ${i}`,children:t}),p("span",{className:`text-lg md:text-2xl font-black break-words tracking-tight leading-tight ${c}`,children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)})]})}),$t=nt(({label:t,value:e,isPositive:a,highlight:o,informational:s})=>B("div",{className:`flex justify-between items-center py-2 gap-4 ${o?"font-black text-blue-600":""} ${s?"text-slate-400 text-xs":""}`,children:[p("span",{className:`${s?"":"text-slate-500 font-bold"} break-words text-sm`,children:t}),p("span",{className:`font-black whitespace-nowrap shrink-0 ${a?"text-emerald-600":s?"":e<0?"text-red-500":"text-slate-800"}`,children:e===0?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)})]}));export{At as E,$ as I,Yt as R,_t as a,$t as b,Bt as c,Et as d,Rt as e,Pt as f,Lt as g,Vt as h};
